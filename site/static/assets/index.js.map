{"version":3,"sources":["index.js"],"names":["contact","require","nodeContact","document","getElementById","resizeImage","src","Promise","resolve","reject","width","image","Image","onload","elem","createElement","scaleFactor","height","ctx","getContext","drawImage","result","canvas","toDataURL","onerror","e","console","log","app","Elm","Main","init","node","flags","window","innerWidth","innerHeight","ports","resize","subscribe","data","all","map","then","resized","resizedImages","send","btnOpenNav","addEventListener","style","btnCloseNav"],"mappings":";;;;;AAgFC,aAhFD,QAAA,qBAoBA,IAAMA,EAAUC,QAAQ,oCAClBC,EAAcC,SAASC,eAAe,oBAE5C,GAAIF,EAAa,CASNG,IAAAA,EAAT,SAAqBC,GACZ,OAAA,IAAIC,QAAQ,SAACC,EAASC,GACrBC,IAEAC,EAAQ,IAAIC,MAElBD,EAAME,OAAS,WACPC,IAAAA,EAAOX,SAASY,cAAc,UAC9BC,EANM,IAMgBL,EAAMD,MAClCI,EAAKJ,MAPO,IAQZI,EAAKG,OAASN,EAAMM,OAASD,EAEvBE,IAAAA,EAAMJ,EAAKK,WAAW,MAC5BD,EAAIE,UAAUT,EAAO,EAAG,EAXZ,IAWsBA,EAAMM,OAASD,GAE3CK,IAAAA,EAASH,EAAII,OAAOC,UAAU,aAAc,KAClDf,EAAQa,IAEVV,EAAMa,QAAU,SAACC,GACfC,QAAQC,IAAI,YAAaF,GACzBhB,EAAOgB,IAETd,EAAML,IAAMA,KA9BVsB,EAAM5B,EAAQ6B,IAAIC,KAAKC,KAAK,CAChCC,KAAM9B,EACN+B,MAAO,CACLvB,MAAOwB,OAAOC,WACdlB,OAAQiB,OAAOE,eA8BnBR,EAAIS,MAAMC,OAAOC,UAAU,SAAAC,GACzBjC,QAAQkC,IAAID,EAAKE,IAAIrC,IACpBsC,KAAK,SAAAC,GACJhB,EAAIS,MAAMQ,cAAcC,KAAKF,OAOnC,IAAMG,EAAa5C,SAASC,eAAe,cACvC2C,GACAA,EAAWC,iBAAiB,QAAS,WACjC7C,SAASC,eAAe,YAAY6C,MAAMvC,MAAQ,SAI1D,IAAMwC,EAAc/C,SAASC,eAAe,eACxC8C,GACAA,EAAYF,iBAAiB,QAAS,WAClC7C,SAASC,eAAe,YAAY6C,MAAMvC,MAAQ","file":"index.js","sourceRoot":"../../../src/js","sourcesContent":["import '../css/style.scss';\n\n// Calendar\n// const holiday = require('./holiday.json');\n// const special = require('./special.json');\n\n// const calendar = require('../elm-calendar/src/CompanyHoliday.elm');\n\n// const node = document.getElementById('calendar');\n// if (node) {\n//     const app = calendar.Elm.Main.init({\n//         node: node,\n//         flags: {\n//             holiday: holiday,\n//             special: special\n//         }\n//     });\n// }\n\n// Contact Form\nconst contact = require('../elm-contact-form/src/Main.elm');\nconst nodeContact = document.getElementById('elm-contact-form');\n\nif (nodeContact) {\n  const app = contact.Elm.Main.init({\n    node: nodeContact,\n    flags: {\n      width: window.innerWidth,\n      height: window.innerHeight\n    }\n  })\n\n  function resizeImage(src) {\n    return new Promise((resolve, reject) => {\n      const width = 800\n      const height = 800\n      const image = new Image()\n\n      image.onload = () => {\n        const elem = document.createElement('canvas')\n        const scaleFactor = width / image.width\n        elem.width = width\n        elem.height = image.height * scaleFactor\n\n        const ctx = elem.getContext('2d')\n        ctx.drawImage(image, 0, 0, width, image.height * scaleFactor)\n\n        const result = ctx.canvas.toDataURL('image/jpeg', 0.85)\n        resolve(result)\n      }\n      image.onerror = (e) => {\n        console.log('onerror: ', e)\n        reject(e)\n      }\n      image.src = src\n    })\n  }\n\n  app.ports.resize.subscribe(data => {\n    Promise.all(data.map(resizeImage))\n    .then(resized => {\n      app.ports.resizedImages.send(resized)\n    })\n  })\n}\n\n// Mobile menu toggle button\n\nconst btnOpenNav = document.getElementById('btnOpenNav');\nif (btnOpenNav) {\n    btnOpenNav.addEventListener('click', () => {\n        document.getElementById(\"side-nav\").style.width = \"100%\";\n    })\n}\n\nconst btnCloseNav = document.getElementById('btnCloseNav');\nif (btnCloseNav) {\n    btnCloseNav.addEventListener('click', () => {\n        document.getElementById(\"side-nav\").style.width = \"0\";\n    });\n}\n"]}